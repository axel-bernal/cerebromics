<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>HLI DataScience Pipelien Viewer | Main dashboard</title>

    <link href="{{ url_for('static', filename='css/bootstrap.min.css')}}" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="{{ url_for('static', filename='css/animate.css')}}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css')}}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/spinner/throbber.css')}}" rel="stylesheet">

    <!-- Data Tables -->
    <link href="{{ url_for('static', filename='css/plugins/dataTables/dataTables.bootstrap.css')}}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/plugins/dataTables/dataTables.responsive.css')}}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/plugins/dataTables/dataTables.tableTools.min.css')}}" rel="stylesheet">


</head>

<body>


<div id="wrapper">

    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav" id="side-menu">
                <li class="nav-header">
                    <div class="dropdown profile-element">
                            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                            <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">HLI User</strong>
                             </span> <span class="text-muted text-xs block">Data scientist <b class="caret"></b></span> </span> </a>
                            <ul class="dropdown-menu animated fadeInRight m-t-xs">
                                <li><a href="#">Logout</a></li>
                            </ul>
                    </div>
                    <div class="logo-element">
                        rDB
                    </div>
                </li>
                <li class="active">
                    <a href="#"><i class="fa fa-database"></i> <span class="nav-label">Dashboard</span></a>
                </li>
                <li>
                    <a href="#"><i class="fa fa-question"></i> <span class="nav-label">Documentation</span> </a>
                </li>
            </ul>

        </div>
    </nav>

    <div id="page-wrapper" class="gray-bg">
        
        <div class="wrapper wrapper-content animated fadeInRight">
            
            <div class="row">
                <div class="col-lg-12">
    
                    <div class="ibox-content m-b-sm border-bottom">
                        <div class="p-xs">
                            <div class="pull-left m-r-md">
                                <i class="fa fa-database text-navy" style="font-size: 66px;"></i>
                            </div>
                            <h2>Welcome to the face-prediction engine</h2>
                            <span>Last model released on: 11:30pm - 12/10/15</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>Basic Data Tables example with responsive plugin</h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <i class="fa fa-wrench"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-user">
                                <li><a href="#">Config option 1</a>
                                </li>
                                <li><a href="#">Config option 2</a>
                                </li>
                            </ul>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">

                    <table class="table table-striped table-bordered table-hover exp-results" >
                    <thead>
                        <tr>
                            <th>Project</th>
                            <th>Model groupd</th>
                            <th>Run</th>
                            <th>Face</th>
                            <th>NumSamples</th>
                            <th>NumTestSamples</th>
                            <th>NumKeys</th>
                            <th>D_RMSE (%)</th>
                            <th>D_top3</th>
                            <th>D_prec (%)</th>
                            <th>C_prec (%)</th>
                            <th>Params</th>
                        </tr>
                        </thead>
                        <tbody>

                        {% for d in data.keys() %}
                        {% for r in data[d].keys() %}
                        <tr>
                            <td>{{data[d][r]['project']}}</td>
                            <td>{{ d }}</td>
                            <td>{{ data[d][r]['name'] }}</td>
                            <td>{{ data[d][r]['facerenderer']['version'] }}</td>
                            <td>{{ data[d][r]['data']['num_samples'] }}</td>
                            <td>{{ data[d][r]['data']['num_test_sample'] }}</td>
                            <td>{{ data[d][r]['data']['num_keys'] }}</td>
                            <td>{{ '%0.2f' % data[d][r]['results']['depth']['rmse'] }}</td>
                            <td>{{ '%0.2f' % data[d][r]['results']['depth']['topn_prec'] }}</td>
                            <td>{{ '%0.2f' % data[d][r]['results']['depth']['precision'] }}</td>
                            <td>{{ '%0.2f' % data[d][r]['results']['color']['precision'] }}</td>
                            <td>{{ data[d][r]['params'] }}</td>
                        </tr>
                        {% endfor %}
                        {% endfor %}

                        </tbody>
                    <tfoot>
                    <tr>
                            <th>Project</th>
                            <th>Model groupd</th>
                            <th>Run</th>
                            <th>Face</th>
                            <th>NumSamples</th>
                            <th>NumTestSamples</th>
                            <th>NumKeys</th>
                            <th>D_RMSE (%)</th>
                            <th>D_top3</th>
                            <th>D_prec (%)</th>
                            <th>C_prec (%)</th>
                    </tr>
                    </tfoot>
                    </table>

                    </div>
                </div>
            </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>Bar Chart Example <small>With custom colors.</small></h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <i class="fa fa-wrench"></i>
                            </a>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                            <div class="flot-chart">
                                <div class="flot-chart-content" id="flot-bar-chart"></div>
                            </div>
                    </div>
                </div>
            </div>
        </div>

        </div>



        <div class="footer">
            <div class="pull-right">
                Version: <strong>alpha-0.1</strong>
            </div>
            <div>
                <strong>Copyright</strong> Human Longevity Inc. &copy; 2014-2015
            </div>
        </div>

    </div>
</div>

<!-- Mainly scripts -->
<script src="{{ url_for('static', filename='js/jquery-2.1.1.js')}}"></script>


<script src="{{ url_for('static', filename='js/bootstrap.min.js')}}"></script>
<script src="{{ url_for('static', filename='js/plugins/metisMenu/jquery.metisMenu.js')}}"></script>
<script src="{{ url_for('static', filename='js/plugins/slimscroll/jquery.slimscroll.min.js')}}"></script>

<!-- Flot -->
<script src="{{ url_for('static', filename='js/plugins/flot/jquery.flot.js')}}"></script>
<script src="{{ url_for('static', filename='js/plugins/flot/jquery.flot.tooltip.min.js')}}"></script>
<script src="{{ url_for('static', filename='js/plugins/flot/jquery.flot.spline.js')}}"></script>
<script src="{{ url_for('static', filename='js/plugins/flot/jquery.flot.resize.js')}}"></script>
<script src="{{ url_for('static', filename='js/plugins/flot/jquery.flot.pie.js')}}"></script>
<script src="{{ url_for('static', filename='js/plugins/flot/jquery.flot.symbol.js')}}"></script>
<script src="{{ url_for('static', filename='js/plugins/flot/jquery.flot.time.js')}}"></script>

<!-- Data Tables -->
<script src="{{ url_for('static', filename='js/plugins/dataTables/jquery.dataTables.js')}}"></script>
<script src="{{ url_for('static', filename='js/plugins/dataTables/dataTables.bootstrap.js')}}"></script>
<script src="{{ url_for('static', filename='js/plugins/dataTables/dataTables.responsive.js')}}"></script>
<script src="{{ url_for('static', filename='js/plugins/dataTables/dataTables.tableTools.min.js')}}"></script>



<!-- ChartJS-->
<script src="{{ url_for('static', filename='js/plugins/chartJs/Chart.min.js')}}"></script>

<!-- Custom and plugin javascript -->
<script src="{{ url_for('static', filename='js/inspinia.js')}}"></script>
<script src="{{ url_for('static', filename='js/plugins/pace/pace.min.js')}}"></script>

<script>
    $(document).ready(function() {

        $('.exp-results').dataTable({
                responsive: true,
                "dom": 'T<"clear">lfrtip',
                "tableTools": {
                    "sSwfPath": "{{ url_for('static', filename='js/plugins/dataTables/swf/copy_csv_xls_pdf.swf')}}"
                }
            });

        //Flot Bar Chart
        var ticks = [
                {% for d in bar_data.t %}
                    [{{ d[0] }}, "{{ d[1] }}"],
                {% endfor %}
        ];

        var barOptions = {
            series: {
                bars: {
                    show: true,
                    barWidth: 0.6,
                    fill: true,
                    align: 'center',
                    fillColor: {
                        colors: [{
                            opacity: 0.8
                        }, {
                            opacity: 0.8
                        }]
                    }
                }
            },
            xaxis: {
                tickDecimals: 0,
                ticks: ticks,
            },
            colors: ["#1ab394"],
            grid: {
                color: "#999999",
                hoverable: true,
                clickable: true,
                tickColor: "#D4D4D4",
                borderWidth:0
            },
            legend: {
                show: false
            },
            tooltip: true,
            tooltipOpts: {
                content: "Precision (%s): %y"
            }
        };
        var barData = [{
            "label": "depth",
            "data": [
                {% for d in bar_data.d %}
                    [{{ d[0] }}, {{ d[1] }}],
                {% endfor %}
            ]},
            {"label": "color",
             "data": [
                {% for d in bar_data.c %}
                    [{{ d[0] }}, {{ d[1] }}],
                {% endfor %}
            ]}
        ];

        $.plot($("#flot-bar-chart"), barData, barOptions);

    });

</script>

</body>

</html>
